<div class="task-create-container p-4 shadow rounded-4" *ngIf="isOwner; else noAccess">
  <h2 class="text-center mb-4 fw-bold text-dark">游닇 Crear Nueva Tarea</h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">

    <!-- T칤tulo -->
    <div class="form-floating mb-3">
      <input
        type="text"
        class="form-control input-light"
        id="taskTitle"
        placeholder="T칤tulo de la tarea"
        formControlName="title"
      />
      <label for="taskTitle"><i class="bi bi-card-text me-1"></i> T칤tulo</label>
    </div>

    <!-- Descripci칩n -->
    <div class="form-floating mb-3">
      <textarea
        class="form-control input-light"
        placeholder="Descripci칩n de la tarea"
        id="taskDescription"
        style="height: 100px;"
        formControlName="description"
      ></textarea>
      <label for="taskDescription"><i class="bi bi-journal-text me-1"></i> Descripci칩n</label>
    </div>

    <!-- Asignar a -->
    <div class="form-floating mb-3">
      <select class="form-select input-light" id="taskAssignee" formControlName="assignee_id">
        <option value="">Selecciona un colaborador</option>
        <option *ngFor="let col of collaborators" [value]="col.id">{{ col.username }}</option>
      </select>
      <label for="taskAssignee"><i class="bi bi-person-fill me-1"></i> Asignar a</label>
    </div>

    <!-- Requisito relacionado -->
    <div class="form-floating mb-3">
      <select class="form-select input-light" id="taskRequirement" formControlName="requirement_id">
        <option value="">Ninguno</option>
        <option *ngFor="let req of requirements" [value]="req.id">
          {{ req.title || 'Requisito #' + req.id }}
        </option>
      </select>
      <label for="taskRequirement"><i class="bi bi-clipboard-check me-1"></i> Requisito relacionado</label>
    </div>

    <!-- Fecha l칤mite -->
    <div class="form-floating mb-4">
      <input
        type="date"
        class="form-control input-light"
        id="taskDueDate"
        placeholder="Fecha l칤mite"
        formControlName="due_date"
      />
      <label for="taskDueDate"><i class="bi bi-calendar-event me-1"></i> Fecha l칤mite</label>
    </div>

    <!-- Bot칩n Crear -->
    <button type="submit" class="btn btn-primary w-100 py-2" [disabled]="loading || form.invalid">
      {{ loading ? 'Creando...' : 'Crear tarea' }}
    </button>
  </form>
</div>

<ng-template #noAccess>
  <div class="alert alert-warning m-3 text-center">
    丘멆잺 No tienes permisos para asignar tareas en este proyecto.
  </div>
</ng-template>
