<div class="d-flex align-items-center justify-content-center vh-100 bg-gradient">
  <div class="card shadow-lg border-0 rounded-4 auth-card">
    <div class="card-body p-5">
      <button class="back-btn" [routerLink]="['/login']">
        <i class="bi bi-arrow-left"></i>
      </button>

      <!-- Logo / Marca -->
      <div class="text-center mb-4">
        <div class="logo-circle mx-auto mb-2">
          <span class="logo-text">JH</span>
        </div>
        <h2 class="fw-bold text-dark">Crear cuenta</h2>
        <p class="text-muted">Completa los campos para registrarte</p>
      </div>

      <!-- Formulario -->
      <form [formGroup]="form" (ngSubmit)="submit()">
        <div class="form-floating mb-3">
          <input
            type="text"
            id="username"
            formControlName="username"
            class="form-control stylish-input"
            placeholder="Usuario"
          />
          <label for="username">Usuario</label>
          <div *ngIf="username?.touched && username?.invalid" class="text-danger small mt-1">
            El usuario debe tener al menos 3 caracteres
          </div>
        </div>

        <div class="form-floating mb-3">
          <input
            type="email"
            id="email"
            formControlName="email"
            class="form-control stylish-input"
            placeholder="Correo"
          />
          <label for="email">Correo</label>
          <div *ngIf="email?.touched && email?.invalid" class="text-danger small mt-1">
            Correo electrónico inválido
          </div>
        </div>

        <!-- Contraseña -->
        <div class="form-floating mb-3 position-relative">
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            formControlName="password"
            class="form-control stylish-input pe-5"
            placeholder="Contraseña"
          />
          <label for="password">Contraseña</label>
          <button
            type="button"
            class="btn btn-sm toggle-password"
            (click)="showPassword = !showPassword"
          >
            <i [class]="showPassword ? 'bi bi-eye-slash' : 'bi bi-eye'"></i>
          </button>
          <div *ngIf="password?.touched && password?.invalid" class="text-danger small mt-1">
            Mínimo 8 caracteres, con mayúscula, minúscula, número y símbolo
          </div>
        </div>

        <!-- Confirmar contraseña -->
        <div class="form-floating mb-3 position-relative">
          <input
            [type]="showConfirm ? 'text' : 'password'"
            id="confirmPassword"
            formControlName="confirmPassword"
            class="form-control stylish-input pe-5"
            placeholder="Confirmar contraseña"
          />
          <label for="confirmPassword">Confirmar contraseña</label>
          <button
            type="button"
            class="btn btn-sm toggle-password"
            (click)="showConfirm = !showConfirm"
          >
            <i [class]="showConfirm ? 'bi bi-eye-slash' : 'bi bi-eye'"></i>
          </button>
          <div
            *ngIf="form.errors?.['passwordMismatch'] && confirmPassword?.touched"
            class="text-danger small mt-1"
          >
            Las contraseñas no coinciden
          </div>
        </div>

        <button class="btn btn-primary w-100 stylish-btn py-2" [disabled]="form.invalid || loading">
          {{ loading ? 'Registrando...' : 'Registrar' }}
        </button>
      </form>

      <div *ngIf="error" class="alert alert-danger mt-3">{{ error }}</div>
      <div *ngIf="success" class="alert alert-success mt-3">{{ success }}</div>

      <div class="text-center mt-4">
        <span class="text-muted">¿Ya tienes cuenta?</span>
        <a [routerLink]="['/login']" class="fw-bold text-primary ms-1">Inicia sesión</a>
      </div>
    </div>
  </div>
</div>
